// style configuration
$background = #000
$available = #222
$target = gold
$primary = #a3533b
$light = #efefef
$fire = #d50000
$unit = 16px // cell size is per default 4x $unit
$unit2 = $unit/2
$unit4 = $unit/4
$unit16 = $unit/16
$material-carbon = radial-gradient(black 15%, transparent 16%) 0 0, radial-gradient(black 15%, transparent 16%) $unit2 $unit2, radial-gradient(rgba(255,255,255,.1) 15%, transparent 20%) 0 $unit16, radial-gradient(rgba(255,255,255,.1) 15%, transparent 20%) $unit2 9px
$material-lava = repeating-linear-gradient(45deg, rgba(0,0,0,0.8), rgba(0,0,0,0.8) $unit2, transparent 0px, transparent $unit ), repeating-linear-gradient(-45deg, rgba(0,0,0,0.5), rgba(0,0,0,0.5) $unit2, transparent 0px, transparent $unit), $fire
$font-heading = 'Bungee', cursive
$font-text = 'Open Sans', sans-serif

// fonts
@import url('https://fonts.googleapis.com/css?family=Bungee|Open+Sans&display=swap')

html, body
  padding 0
  margin 0
  font-size $unit

// layout
#app
  font-family $font-text
  -webkit-font-smoothing antialiased
  -moz-osx-font-smoothing grayscale
  background $background
  height 100vh
  width 100vw
  display flex
  justify-content center
  align-items center

  #map
    display flex
    justify-content center
    align-items center
    flex-direction row
    position relative

    .column
      justify-content center
      align-items center
      flex-direction column

      .cell
        background $material-carbon
        background-color #282828
        background-size 1rem 1rem
        position relative
        width 4rem
        height 4rem
        box-sizing border-box
        border 1px solid $available
        color white // for debug purposes
        transition all .5s

        &.blocked
          &:not(.start)
            background $background
            border none
          &:not(.start):not(.background)
            border-top .8rem solid #333
            border-left .8rem solid #333
            border-bottom .8rem solid #111
            border-right .8rem solid #111
        &.trap
          background $material-lava
          border $unit4 solid rgba($background, .8)
        &.target
          background $available
        &.target::before, &.target::after
          content ''
          display block
          position absolute
          width 70%
          height 70%
          top 50%
          left 50%
          transform translate(-50%, -50%)
        &.target::after
          background $target
          transition width 1s .3s, height 1s .3s
          animation glow 2s 0s infinite linear alternate
        &.target-closed::before
          transition opacity 1s .5s
          background $background
          opacity 0
        &.target-closed::after
          width 0
          height 0

    .player
      position absolute
      width 4rem
      height 4rem
      transition left .2s, top .2s, transform .1s

      &::after
        content ''
        display inline-block
        position absolute
        top 2.4rem
        left 50%
        transform translate(-50%)
        width 2.4rem
        height 2.4rem
        border-radius 50%
        background-color $primary
        background-image linear-gradient(-45deg, rgba($background,.6) 0%, transparent 100%);
        box-shadow 0 1.6rem 2.4rem 1.2rem $background
        animation idle 1s 0s infinite cubic-bezier(.65,.05,.36,1) alternate
        transition height 1s, width 1s, opacity .5s
      &.exit::after,
      &.trapped::after
        top 1.2rem
        animation none
        box-shadow none
        width 0
        height 0
        opacity 0

      &.right
        // transform rotate(90deg)
      &.left
        // transform rotate(-90deg)
      &.up
        // transform rotate(0deg)
      &.down
        // transform rotate(180deg)
  #dashboard
    display flex
    justify-content center
    align-items stretch
    flex-direction column
    margin-left 8rem

    .title, .subtitle
      font-family $font-heading
      color $primary
      text-align center
      margin-bottom 3rem

      h1
        position relative
        display flex
        flex-direction column

        .first
          font-size 1.7rem
          line-height 1.7rem
        .second
          font-size 3.3rem
          line-height 2.5rem
        .version
          font-size 1rem
          font-family $font-text
          line-height 1.5rem
       
      h2
        font-size 2.5rem
        line-height 2.5rem
        margin 0

    .controls
      padding 2rem
      margin-bottom 2rem
      background $available

      & > *:not(:last-child)
        margin-bottom .5rem

// text
.size-2x
  font-size 2rem
.text-center
  text-align center

// cursor
.cursor-pointer
  cursor pointer

// positioning
.mr-1
  margin-right 1rem
.fixed-bottom-right
  position fixed
  bottom .5rem
  right .5rem

// buttons
.btn
  appearance none
  background $available
  border .04rem solid $primary
  border-radius 0
  color $primary
  cursor pointer
  display inline-block
  outline none
  padding .6rem .8rem
  text-decoration none
  transition background .2s, border .2s, box-shadow .2s, color .2s
  user-select none
  vertical-align middle
  white-space nowrap
  text-transform uppercase
  letter-spacing .2rem
  &:hover
    box-shadow 0 0 0 .4rem rgba($primary, .2)
  &:focus,
  &:hover
    background rgba($primary, .2)
    border-color $primary
    text-decoration none
  &:active,
  &.active
    background $primary
    border-color darken($primary, 5%)
    color $light
    text-decoration none

  &.btn-block
    display block
    width 100%

  &.btn-primary
    background $primary
    border-color darken($primary, 5%)
    color $light
    text-decoration none

    &:focus,
    &:hover
      background rgba($primary, .8)
    &:active,
    &.active
      background $light
      border-color darken($primary, 5%)
      color $primary

// featured numbers
.number
  background $available
  color $primary
  font-family $font-heading

  label
    display inline-block
    margin-left .5rem
    font-family $font-text

// modal
.modal
  background $available
  color $light
  position absolute
  top 50%
  left 50%
  transform translate(-50%, -50%)
  width 50%
  height auto
  padding 2rem
  opacity 0
  visibility hidden
  box-shadow 0 0 100vw 100vw rgba(0,0,0,.5)
  box-sizing border-box
  transition all .4s ease-in-out

  &.active
    width 60%
    opacity 1
    visibility visible
    animation finished 1s both

  .header
    font-size 2.5rem
    font-family $font-heading

  .footer
    margin-top 2rem

// animations
@keyframes idle
  from
    top .6rem
    box-shadow 0 .6rem 2.4rem -.2rem $background
  to
    top 0
    box-shadow 0 1.6rem 2.4rem -.2rem $background

@keyframes glow
  from
    box-shadow 0 0 .8rem -.4rem $target
  to
    box-shadow 0 0 2rem -.4rem $target

@keyframes finished
  0%
    transform translate(-50%, -50%) scaleX(1);
  10%, 20%
    transform translate(-50%, -50%) scale3d(.9,.9,.9) rotate(-3deg);
  30%, 60%, 90%
    transform translate(-50%, -50%) scale3d(1.1,1.1,1.1) rotate(3deg);
  45%, 75%
    transform translate(-50%, -50%) scale3d(1.1,1.1,1.1) rotate(-3deg);
  100%
    transform translate(-50%, -50%) scaleX(1);
